{% set state = status.get('state','unknown') %}
{% if state in ['queued','processing'] %}
<div class="mb-2 text-sm text-amber-700 bg-amber-50 border border-amber-200 rounded p-2">
    {{ 'Queued…' if state == 'queued' else 'Processing…' }} This page auto-refreshes.
</div>
{% elif state == 'error' %}
<div class="mb-2 text-sm text-red-700 bg-red-50 border border-red-200 rounded p-2">
    Job failed. Check logs and try again.
</div>
{% endif %}

<div class="bg-white rounded-xl shadow p-5">
    <h2 class="text-lg font-semibold mb-3">Status</h2>
    <p class="mb-2">State:
        <span class="px-2 py-1 rounded text-xs {{ 'bg-green-100' if state=='done' else 'bg-yellow-100' }}">
            {{ state }}
        </span>
    </p>
    <div class="text-sm">
        <span class="font-semibold">Artifacts:</span>
        {% if files %}
        <ul class="list-disc ml-5 mt-1">
            {% for f in files %}
            <li><a class="text-indigo-600" href="/results/{{ job_id }}/{{ f }}">{{ f }}</a></li>
            {% endfor %}
        </ul>
        {% else %}
        <span class="text-slate-500">none yet</span>
        {% endif %}
    </div>
</div>